<!--
This file is part of Glotzenheft.

Glotzenheft is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Glotzenheft is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<div class="createTracklistEpisodeDIV">
    <div class="createTracklistEpisodeWrapperDIV">
        <h1>
            {{
            inpIsEpisodeEditing()
            ? "Episode in der Trackliste editieren"
            : "Episode zur Trackliste hinzufügen"
            }}
        </h1>
        <div class="createTracklistEpisodeFormDIV">
            <form [formGroup]="createEpisodeForm" (submit)="inpIsEpisodeEditing() ? saveEditedEpisode() : submitForm()">
                <h2>{{ inpTracklist().tracklistName }}</h2>
                <p>Episodenname: {{ inpEpisode().name }}</p>
                <p>Laufzeit: {{ inpEpisode().runtime ? inpEpisode().runtime + ' min': " nicht vorhanden" }}</p>
                <p>Erscheinungsdatum: {{ inpEpisode().airDate ? (inpEpisode().airDate | date:'dd.MM.yyyy') : " nicht
                    vorhanden" }}</p>
                <p>Episodennummer: {{ inpEpisode().episodeNumber }}</p>

                <p-float-label variant="in">
                    <p-date-picker inputId="watch" [showIcon]="true" formControlName="watchDate" dateFormat="dd.mm.yy"
                        [showTime]="true" [hourFormat]="'24'" [showOnFocus]="false" [showButtonBar]="true" />
                    <label [for]="'watch'">Wann geschaut? (optional)</label>
                </p-float-label>

                <div class="formAcions">
                    @if (!inpIsEpisodeEditing()) {
                        <p-button label="Hinzufügen" icon="pi pi-plus" type="submit" [disabled]="!isCreateButtonEnabled" />
                    }
                    @else {
                        <p-button label="Speichern" icon="pi pi-save" [disabled]="!isUpdateButtonEnabled"
                            (onClick)="saveEditedEpisode()" />
                        <div>
                            <p-button label="Löschen" icon="pi pi-trash" severity="danger"
                                [disabled]="!isDeleteButtonEnabled" (onClick)="setDeletionDialogVisibilityStatus(true)" />
                        </div>
                    }

                    <div>
                        <p-button label="Abbrechen" icon="pi pi-times" severity="secondary"
                            [disabled]="!isCancelButtonEnabled" (onClick)="cancelEpisodeForm()" />
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

@if (isDeletionDialogVisible) {
    <app-delete-dialog [inpHeading]="'Episode löschen'" [inpText]="'Willst du die Episode wirklich löschen?'"
        [inpIsButtonEnabled]="isDeleteButtonEnabled" (outDeleteMedia)="deleteEpisode()"
        (outCancelDeletion)="setDeletionDialogVisibilityStatus(false)" />
}