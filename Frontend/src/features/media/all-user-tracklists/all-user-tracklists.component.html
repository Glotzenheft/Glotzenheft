<ng-container
  *ngIf="visibility === 0 && (userTracklists$ | async) as userTracklists"
>
  <p-panel
    *ngFor="let tracklist of userTracklists"
    [header]="tracklist.tracklistName"
    [toggleable]="true"
    [collapsed]="true"
  >
    <div class="tracklistPanelDIV">
      <div class="seasonPictureWrapper">
        <div class="seasonMetaPicture">
          <p *ngIf="tracklist.media.posterPath === null">kein Bild vorhanden</p>
          <img
            *ngIf="tracklist.media.posterPath !== null"
            [src]="tmdbPosterPath + tracklist.media.posterPath"
            [alt]="'Dies ist das Bild fÃ¼r von ' + tracklist.tracklistName"
          />
        </div>
      </div>
      <div class="tracklistPanelMediaDetailsDIV">
        <p>{{ tracklist.media.type === "movie" ? "Film" : "Serie" }}</p>
        <div [className]="setTracklistStatus(tracklist.status) + ' statusDIV'">
          <p>Status: {{ tracklist.status }}</p>
        </div>

        <p>
          Startdatum:
          {{
            tracklist.startDate
              ? (tracklist.status | dateFormatting)
              : "nicht vorhanden"
          }}
        </p>
        <p>
          Enddatum:
          {{
            tracklist.finishDate
              ? (tracklist.finishDate | dateFormatting)
              : "nicht vorhanden"
          }}
        </p>
        <div class="ratingDIV">
          <p>Bewertung:</p>
          <p-rating
            [stars]="10"
            [disabled]="true"
            [(ngModel)]="tracklist.rating"
          />
        </div>

        <p-button
          label="Bearbeiten"
          icon="pi pi-pencil"
          (onClick)="editTracklist(tracklist, tracklist.media.type === 'movie')"
        />
        <div class="mediaButton">
          <p-button
            label="zum Medium gehen"
            icon="pi pi-arrow-right"
            severity="contrast"
            (onClick)="
              navigateToDetailspage(tracklist.media.id, tracklist.media.type)
            "
          />
        </div>
      </div>
    </div>
  </p-panel>
</ng-container>

<ng-container *ngIf="currentTracklist">
  <app-update-film-tracklist
    *ngIf="currentTracklist.media.type === 'movie' && visibility === 1"
    [inpTracklist]="currentTracklist"
    (cancelTracklistForm)="refreshPage(true)"
    (refreshFilmPage)="refreshPage(false)"
  />

  <app-update-tracklist-form
    *ngIf="currentTracklist.media.type === 'tv' && visibility === 2"
    [inpSelectedTracklist]="currentTracklist"
    (cancelTracklistEditing)="refreshPage(true)"
    (saveUpdatedTracklist)="refreshPage(false)"
  />
</ng-container>
