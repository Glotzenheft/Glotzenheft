<h1>Film</h1>

<div class="backButtonDIV">
  <p-button
    label="zur端ck"
    (onClick)="navigateToMultiSearch()"
    severity="secondary"
  />
</div>
<div *ngIf="hasError">
  <p-panel header="Fehler beim Laden der Seite" class="error">
    <p>
      Leider ist beim Laden der Season ein Fehler aufgetreten. Bitte versuchen
      Sie es erneut durch ein erneutes Laden der Seite.
    </p>
  </p-panel>
</div>

<div *ngIf="isInvalidID">
  <p-panel header="Fehler beim Laden der Seite" class="error">
    <p>
      Die eingegebene ID in der URL ist ung端ltig. Bitte versuchen Sie es erneut
      durch ein Zur端ckgehen zur letzten Seite und ein erneutes Laden dieser
      Seite.
    </p>
  </p-panel>
</div>

<div *ngIf="filmData$ | async as filmData">
  <div class="heading">
    <h1>{{ filmData.name }}</h1>
    <p *ngIf="filmData.id">GESPEICHERT</p>
  </div>
  <div class="seasonMeta">
    <div class="seasonPictureWrapper">
      <div class="seasonMetaPicture">
        <p *ngIf="filmData.posterPath === null">kein Bild vorhanden</p>
        <img
          *ngIf="filmData.posterPath !== null"
          [src]="'https://image.tmdb.org/t/p/w500' + filmData.posterPath"
          [alt]="'Dies ist das Bild f端r von ' + filmData.name"
        />
      </div>
    </div>
    <div class="seasonMetaContent">
      <div>
        <h2>Beschreibung</h2>
        <p class="descriptionP">{{ filmData.description }}</p>
        <p>Ausstrahlung am {{ filmData.firstAirDate | dateFormatting }}</p>
        <p *ngIf="filmData.seasons.length > 0">
          Anzahl der Staffeln: {{ filmData.seasons.length }}
        </p>
      </div>
    </div>
  </div>

  <div class="newWatchlistButton">
    <p-button
      label="neue Watchlist anlegen"
      (onClick)="openTracklistDialog()"
      class="bigButton"
      icon="pi pi-plus"
    />
  </div>
</div>

<p-dialog
  class="dialog"
  *ngIf="isTracklistDialogVisible && (filmData$ | async) as filmData"
  [(visible)]="isTracklistDialogVisible"
  [header]="filmData.name"
>
  <app-create-new-tracklist
    [mediaName]="filmData.name"
    [mediaID]="filmData.id"
  />
</p-dialog>
