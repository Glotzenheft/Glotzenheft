<h2>Passwort ändern</h2>

<div class="login">
  <div class="register">
    <form
      action="submit"
      [formGroup]="resetPasswordGroup"
      (ngSubmit)="submitForm()"
    >
      <div>
        <p-select
          formControlName="validationQuestion"
          [options]="questionList"
          optionLabel="name"
          placeholder="Eine Frage auswählen ..."
        />
        <p-message
          severity="error"
          size="small"
          *ngIf="
            resetPasswordGroup.get('validationQuestion')?.invalid &&
            hasError('validationQuestion')
          "
          >Es muss eine Frage ausgewählt werden.</p-message
        >
      </div>

      <div>
        <p-float-label class="userInput" variant="in">
          <input
            type="text"
            id="answer"
            pInputText
            formControlName="validationAnswer"
            name="answer"
          />
          <label for="answer">Antwort</label>
        </p-float-label>
        <p-message
          severity="error"
          size="small"
          *ngIf="
            resetPasswordGroup.get('validationAnswer')?.invalid &&
            hasError('validationAnswer')
          "
          >Antwort ist Pflicht</p-message
        >
      </div>

      <div>
        <p-float-label class="userInput" variant="in">
          <p-password
            type="text"
            id="password"
            formControlName="newPassword"
            name="password"
            weakLabel="geringe Sicherheit"
            mediumLabel="mittlere Sicherheit"
            strongLabel="hohe Sicherheit"
          />
          <label for="password">neues Passwort</label>
        </p-float-label>
        <p-message
          severity="error"
          size="small"
          *ngIf="
            resetPasswordGroup.get('newPassword')?.invalid &&
            hasError('newPassword')
          "
          >Neues Passwort ist Pflicht und muss mindestens 8 Zeichen lang
          sein.</p-message
        >
      </div>

      <div>
        <p-float-label class="userInput" variant="in">
          <p-password
            type="text"
            id="passrepeat"
            formControlName="repeatPassword"
            name="passrepeat"
            weakLabel="geringe Sicherheit"
            mediumLabel="mittlere Sicherheit"
            strongLabel="hohe Sicherheit"
          />
          <label for="passrepeat">Passwort wiederholen</label>
        </p-float-label>
        <p-message
          severity="error"
          size="small"
          *ngIf="
            resetPasswordGroup.get('repeatPassword')?.invalid &&
            hasError('repeatPassword')
          "
          >Diese Feld ist Pflicht.</p-message
        >
      </div>

      <p-message
        *ngIf="passwordMismatch() && resetPasswordGroup.touched"
        size="small"
        severity="error"
        >Die Passwörter müssen übereinstimmen.</p-message
      >

      <div class="loginActions">
        <p-button
          fluid
          label="Passwort ändern"
          icon="pi pi-user-edit"
          class="button2"
          type="submit"
        />
        <p-button
          fluid
          class="button2"
          severity="secondary"
          (onClick)="navigationService.navigateToStartPage()"
          label="Abbrechen"
          icon="pi pi-times"
        />
      </div>
    </form>
  </div>
</div>
