<p-button
  icon="pi pi-directions"
  label="Hier die AGB lesen"
  (onClick)="openAGBDialog()"
/>

<div class="login">
  <div class="register">
    <form
      action="submit"
      [formGroup]="registerGroup"
      (ngSubmit)="registerUser()"
    >
      <div>
        <p-floatlabel class="userInput" variant="in">
          <input
            type="text"
            id="userName"
            pInputText
            formControlName="username"
            name="username"
          />
          <label for="userName">Nutzername</label>
        </p-floatlabel>
        <p-message
          severity="error"
          size="small"
          *ngIf="registerGroup.get('username')?.invalid && hasError('username')"
          >Nutzername ist Pflicht</p-message
        >
      </div>

      <div>
        <p-floatlabel class="userInput" variant="in">
          <p-password
            type="password"
            id="password"
            class="passInput"
            fluid
            formControlName="password"
            name="password"
          ></p-password>
          <label for="password">Passwort</label>
        </p-floatlabel>
        <p-message
          class="formMessage"
          severity="error"
          size="small"
          *ngIf="registerGroup.get('password')?.invalid && hasError('password')"
          >Passwort ist Pflicht und muss mindestens 8 Zeichen lang
          sein.</p-message
        >
      </div>

      <div>
        <p-floatlabel class="userInput" variant="in">
          <p-password
            type="password"
            id="passwordConfirm"
            class="passInput"
            fluid
            formControlName="passwordConfirm"
            name="passwordConfirm"
            [feedback]="false"
          ></p-password>
          <label for="passwordConfirm">Passwort bestätigen</label>
        </p-floatlabel>
        <p-message
          severity="error"
          size="small"
          *ngIf="
            registerGroup.get('passwordConfirm')?.invalid &&
            hasError('password')
          "
          >Das Passwort muss bestätigt werden und mit dem eingegebenen Passwort
          übereinstimmen.</p-message
        >
      </div>

      <div>
        <p-select
          formControlName="validationQuestion"
          [options]="questionList"
          optionLabel="name"
          placeholder="Eine Frage auswählen ..."
        />
        <p-message
          severity="error"
          size="small"
          *ngIf="
            registerGroup.get('validationQuestion')?.invalid &&
            hasError('validationQuestion')
          "
          >Es muss eine Frage ausgewählt werden.</p-message
        >
      </div>

      <div>
        <p-floatlabel class="userInput" variant="in">
          <input
            type="text"
            id="answer"
            pInputText
            formControlName="validationAnswer"
            name="answer"
          />
          <label for="answer">Antwort</label>
        </p-floatlabel>
        <p-message
          severity="error"
          size="small"
          *ngIf="
            registerGroup.get('validationAnswer')?.invalid &&
            hasError('validationAnswer')
          "
          >Antwort ist Pflicht</p-message
        >
      </div>

      <div>
        <p-checkbox inputId="agb" formControlName="agbAccept" [binary]="true" />
        <label for="agb" class="agbLabel">
          Ich habe die AGB gelesen und akzeptiere diese.</label
        >
        <p-message
          severity="error"
          size="small"
          *ngIf="
            registerGroup.get('agbAccept')?.invalid && hasError('agbAccept')
          "
          >Die AGB müssen akzeptiert werden.</p-message
        >
      </div>

      <div class="loginActions">
        <p-button
          fluid
          label="Registrieren"
          icon="pi pi-user-plus"
          class="button2"
          type="submit"
        />
        <p-button
          fluid
          class="button2"
          severity="secondary"
          (onClick)="navigationService.navigateToStartPage()"
          label="Abbrechen"
          icon="pi pi-times"
        />
      </div>
    </form>
  </div>
</div>

<p-dialog [(visible)]="isDialogVisible" header="Fehler">
  <p>
    Die Passwörter müssen übereinstimmen. Bitte überprüfen Sie Ihre Eingaben und
    versuchen Sie es erneut.
  </p>
</p-dialog>

<p-dialog [(visible)]="isAGBDialogVisible">
  <app-agb />
</p-dialog>
